<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Agencia Digital — Contenido, RRSS y Marketing</title>
    <meta name="description" content="Creación de contenido, gestión de redes sociales y servicios de marketing digital. Planes desde 300€. Contacta hoy mismo." />
    <style>
      :root {
        --bg: #ffffff;
        --panel: #f8fafc;
        --text: #111827;
        --muted: #6b7280;
        --brand: #28a745;
        --brand-600: #079039;
        --accent: #14b840;
        --border: #e5e7eb;
        --whatsapp: #25D366;
        /* Primary (blue) for non-WhatsApp buttons */
        --primary: #2563EB;
        --primary-600: #1D4ED8;
        --primary-soft: #60A5FA; /* lighter blue for text */
      }
      html, body { height: 100%; }
      body {
        margin: 0;
        color: var(--text);
        background: radial-gradient(1200px 800px at 85% -10%, #eef2ff 0%, var(--bg) 55%) fixed;
        font: 400 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        scroll-behavior: smooth;
        scroll-snap-type: y proximity;
        overscroll-behavior-y: contain;
      }
      a { color: inherit; text-decoration: none; }
      img { max-width: 100%; display: block; }
      .container { width: min(1100px, 92vw); margin: 0 auto; }

      /* Header */
      :root { --nav-h: 64px; }
      header {
        position: sticky; top: 0; z-index: 40;
        backdrop-filter: saturate(140%) blur(8px);
        background: color-mix(in oklab, var(--bg) 82%, transparent);
        border-bottom: 1px solid var(--border);
      }
      .nav { display: flex; align-items: center; justify-content: space-between; height: var(--nav-h); }
      .brand { display: flex; align-items: center; gap: 10px; font-weight: 700; letter-spacing: .3px; }
      .brand-badge {
        width: 28px; height: 28px; border-radius: 7px; display: grid; place-items: center;
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-600) 100%);
        box-shadow: 0 6px 20px rgba(37,99,235,.28);
      }
      nav a { opacity: .92; margin-left: 22px; font-weight: 500; }
      nav a:hover:not(.btn-wa) { color: var(--primary); }
      .cta {
        padding: 10px 16px; border-radius: 10px; font-weight: 600; color: white;
        background: linear-gradient(180deg, var(--primary) 0%, var(--primary-600) 100%);
        box-shadow: 0 4px 30px rgba(37, 99, 235, 0.35);
      }
      .cta:hover { filter: brightness(1.08); }

      /* Snap Sections */
      .snap { min-height: calc(100svh - var(--nav-h)); scroll-snap-align: start; scroll-snap-stop: always; padding-top: var(--nav-h); display: flex; align-items: center; scroll-margin-top: var(--nav-h); }
      .snap > .container { width: min(1100px, 92vw); margin: 0 auto; }

      /* Hero */
      .hero { text-align: center; }
      .hero h1 { font-size: clamp(28px, 5vw, 46px); line-height: 1.1; margin: 0 0 12px; }
      .hero p { margin: 0 auto 26px; color: var(--muted); max-width: 720px; }
      .hero .actions { display: flex; gap: 12px; justify-content: center; align-items: center; flex-direction: column; }
      .hero > .container { display: flex; flex-direction: column; height: calc(100svh - var(--nav-h)); gap: 16px; justify-content: center; align-items: center; }
      .services > .container { display: flex; flex-direction: column; height: calc(100svh - var(--nav-h)); gap: 12px; }
      .btn-ghost { padding: 10px 16px; border-radius: 10px; border: 1px solid var(--border); }
      .btn-ghost:hover { border-color: color-mix(in oklab, var(--border), white 12%); }

      /* Sections */
      section { margin-top: 52px; padding: 52px 0; }
      .snap { padding: 0; }
      .section-title { font-size: clamp(22px, 3.5vw, 32px); margin: 0 0 22px; text-align: center; }
      .muted-center { color: var(--muted); text-align: center; margin: 0 auto 28px; max-width: 760px; }

      /* Services window inside first section */
      .services { display: flex; flex-direction: column; flex: 1 1 auto; min-height: 0; }
      .services.snap { padding-bottom: 32px; }
      .services-header { margin-top: 4px; }
      .services-window { flex: 0 0 auto; min-height: 0; height: auto; box-sizing: border-box; overflow: hidden; }
      .services-carousel { height: auto; min-height: 0; display: flex; align-items: stretch; gap: 12px; overflow-x: auto; overflow-y: visible; scroll-snap-type: x mandatory; scroll-behavior: smooth; padding: 12px; -webkit-overflow-scrolling: touch; touch-action: pan-y pan-x; }
      .service-slide { flex: 0 0 100%; height: auto; min-height: 0; scroll-snap-align: center; scroll-snap-stop: always; border-radius: 12px; border: 1px solid var(--border); background: color-mix(in oklab, var(--panel) 96%, transparent); display: flex; text-align: center; margin: 0; padding: 20px; box-sizing: border-box; }
      .service-slide > div { flex: 1 1 auto; height: auto; min-height: 0; display: flex; flex-direction: column; justify-content: space-around; align-items: center; gap: 12px; padding: 20px; box-sizing: border-box; margin-top: 0; }
      .service-slide h3 { margin: 4px 0 8px; font-size: clamp(18px, 3vw, 22px); padding-top: 10px; }
      .service-slide p { margin: 0; color: var(--muted); max-width: 58ch; }
      .services-list { margin: 10px 0 0; padding: 0; list-style: none; display: flex; flex-direction: column; gap: 8px; align-items: stretch; justify-content: flex-start; color: var(--muted); text-align: left; width: 100%; }
      .services-list li { display: flex; align-items: center; justify-content: space-between; width: 100%; padding: 12px 14px; border-radius: 12px; border: 1px solid var(--border); background: color-mix(in oklab, var(--panel) 94%, transparent); box-sizing: border-box; }
      .services-list li::before { content: none; }
      .services-list li::after { content: "✓"; color: var(--whatsapp); font-weight: 900; margin-left: 12px; }
      .services-actions { display: flex; justify-content: center; gap: 12px; margin-top: 12px; }

      /* Desktop: servicios como antes (grid, sin ventana a altura completa) */
      @media (min-width: 721px) {
        .hero > .container { height: auto; }
        .services > .container { height: auto; }
        .services { flex: 0 0 auto; }
        .services-window { height: auto; min-height: 0; overflow: visible; background: transparent; border: 0; padding: 0; }
        .services-carousel {
          display: grid; grid-template-columns: repeat(3, 1fr);
          gap: 16px; height: auto; overflow: visible; padding: 0; scroll-snap-type: none;
        }
        .service-slide {
          flex: initial; height: auto; scroll-snap-align: unset; scroll-snap-stop: unset;
          border-radius: 14px; border: 1px solid var(--border); background: color-mix(in oklab, var(--panel) 88%, transparent);
          text-align: center; display: block; padding: 18px;
        }
        .services-actions { margin-top: 16px; }
      }

      /* Mobile: secciones a pantalla completa con snap y layouts controlados */
      @media (max-width: 720px) {
        html, body { height: 100%; }
        body { scroll-snap-type: y mandatory; }
        .snap { min-height: calc(100svh - var(--nav-h)); scroll-snap-align: start; }
        .snap > .container { height: calc(100svh - var(--nav-h)); display: flex; flex-direction: column; }
        header { position: sticky; }
        /* Contacto: menos espacio y sin ocupar toda la altura */
        #contacto.snap { min-height: auto; padding-top: 32px; padding-bottom: 32px; }
        #contacto.snap > .container { height: auto; }
        #contacto .section-title { margin-top: 20px; }
        footer { padding-top: 16px; padding-bottom: 60px; }
      }

      /* Cards grid */
      .grid { display: grid; gap: 16px; grid-template-columns: repeat(12, 1fr); }
      .col-4 { grid-column: span 12; }
      @media (min-width: 720px) { .col-4 { grid-column: span 4; } }
      .card {
        background: color-mix(in oklab, var(--panel) 88%, transparent);
        border: 1px solid var(--border);
        border-radius: 14px; padding: 18px; height: 100%;
      }
      .card h3 { margin: 0 0 8px; font-size: 18px; }
      .card p { margin: 0; color: var(--muted); }

      /* Pricing */
      .pricing .card { padding: 22px; display: flex; flex-direction: column; position: relative; overflow: hidden; }
      .price { font-size: 30px; font-weight: 800; margin: 8px 0 14px; }
      .price .old-price { font-size: 14px; font-weight: 600; color: var(--muted); text-decoration: line-through; margin-left: 8px; opacity: .9; }
      .plan-divider { height: 1px; background: var(--border); border-radius: 1px; margin: 6px 0 10px; }
      .pieces-per-month { font-weight: 800; color: var(--text); letter-spacing: .2px; margin: 0 0 14px; }
      .features { list-style: none; padding: 0; margin: 0 0 18px; color: var(--muted); }
      .features li { margin: 6px 0; }
      .buy { margin-top: auto; display: block; text-align: center; align-self: stretch; width: 100%; box-sizing: border-box; }
      /* Badge button style in top-right corner */
      .badge-best,
      .badge-best-red {
        position: absolute;
        top: 10px;
        right: 10px;
        z-index: 2;
        display: inline-block;
        padding: 6px 10px;
        border-radius: 999px;
        background: transparent;
        color: var(--text);
        font-weight: 800;
        font-size: calc(12px * 1.05);
        letter-spacing: .2px;
        border: 1px solid var(--text);
        box-shadow: none;
        pointer-events: none;
      }
      /* Make "Más vendido" 5% smaller than the default ribbon */
      .badge-best { font-size: calc(12px * 1.05 * 0.95); }

      /* Contact */
      form { display: grid; gap: 12px; grid-template-columns: repeat(12,1fr); }
      .field { grid-column: span 12; display: flex; flex-direction: column; gap: 6px; }
      @media (min-width: 720px) {
        .field.half { grid-column: span 6; }
      }
      label { font-weight: 600; font-size: 14px; }
      input, select, textarea {
        background: var(--panel); color: var(--text); border: 1px solid var(--border); border-radius: 10px;
        padding: 12px 12px; font: inherit;
      }
      textarea { min-height: 110px; resize: vertical; }
      input:focus, select:focus, textarea:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(37,99,235,.2); }
      .submit { grid-column: 1 / -1; justify-self: center; padding: 12px 18px; border-radius: 12px; background: linear-gradient(180deg, var(--primary) 0%, var(--primary-600) 100%); color: #ffffff; font-weight: 800; border: 0; cursor: pointer; box-shadow: 0 4px 20px rgba(37, 99, 235, 0.25); }
      .submit:hover { filter: brightness(1.05); }

      /* Footer */
      footer { padding: 28px 0 80px; color: var(--muted); text-align: center; border-top: 1px solid var(--border); }

      /* Mobile: Planes como carrusel vertical */
      @media (max-width: 720px) {
        /* Servicios: lista vertical (sin carrusel interno) */
        .services.snap > .container { height: auto; }
        .services > .container { height: auto; }
        .services-window { flex: 1 1 auto; height: auto; }
        .services-carousel { display: flex; flex-direction: column; gap: 12px; height: auto; overflow-y: visible; overflow-x: hidden; scroll-snap-type: none; padding: 12px; }
        .service-slide, .service-slide > div { height: auto; }

        /* Planes: carrusel vertical interno que llena la sección */
        .pricing.snap { align-items: stretch; }
        .pricing .container { display: flex; flex-direction: column; height: 100%; }
        .pricing .section-title { margin-top: 28px; }
        #contacto .section-title { margin-top: 28px; }
        .pricing .grid {
          display: block; /* apila las tarjetas */
          flex: 1 1 auto; /* ocupa el alto restante de la sección */
          overflow-y: auto; /* área scroll interna */
          padding: 12px 0 16px;
          scroll-snap-type: y mandatory;
          scroll-behavior: smooth;
          -webkit-overflow-scrolling: touch;
        }
        .pricing .grid .card {
          scroll-snap-align: start;
          min-height: 100%; /* cada card ocupa toda el área visible del carrusel */
          margin: 0 0 12px;
          display: flex; flex-direction: column; justify-content: flex-start;
        }
      }

      /* FAB móvil para ir a Planes (solo visible en sección Servicios) */
      .fab-planes {
        position: fixed; left: 50%; bottom: max(16px, env(safe-area-inset-bottom) + 8px); transform: translateX(-50%);
        z-index: 60; display: none; align-items: center; gap: 8px;
        padding: 12px 16px; border-radius: 999px; color: #fff; font-weight: 700;
        background: linear-gradient(180deg, var(--primary) 0%, var(--primary-600) 100%);
        box-shadow: 0 10px 26px rgba(37, 99, 235, 0.35);
      }
      @media (min-width: 721px) { .fab-planes { display: none !important; } }
      .fab-planes.show { display: inline-flex; }

      /* WhatsApp button (navbar) */
      .btn-wa {
        display: inline-flex; align-items: center; gap: 10px; margin-left: 14px;
        background: var(--whatsapp); color: #06130a; font-weight: 800; padding: 10px 14px; border-radius: 999px;
        box-shadow: 0 10px 26px rgba(37,211,102,.25); opacity: 1;
      }
      .btn-wa:hover { filter: brightness(1.05); color: #06130a; }
      .wa-ico { width: 20px; height: 20px; }

      /* Small helpers */
      .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); border: 0; }
      [hidden] { display: none !important; }
      .contact-actions { display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin:12px 0 18px; }
    </style>
  </head>
  <body>
    <header>
      <div class="container nav">
        <div class="brand">
          <span aria-hidden class="brand-badge">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M3 7h3.5l1.8-2.7A2 2 0 0 1 10 3h4a2 2 0 0 1 1.7 1.3L17.5 7H21a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2z"/>
              <circle cx="12" cy="13" r="4"/>
            </svg>
          </span>
          <span>GrabandoconCésar</span>
        </div>
        <nav>
          <a class="btn-ghost" aria-label="Contactar"href="#contacto">
            Contacto
          </a>
        </nav>
      </div>
    </header>

    <main>
      <!-- Sección 1: Hero + Servicios (100% viewport) -->
      <section id="inicio" class="snap hero">
        <div class="container">
          <h1>Creación y gestión de contenido digital</h1>
          <p>Impulsa tu marca con contenido consistente, crecimiento en redes y campañas medibles. Estrategia y ejecución, sin complicaciones.</p>
          <div class="actions">
            <a class="btn-ghost" href="#servicios">Ver servicios</a>
            <a class="cta" href="#planes">Ver planes</a>
          </div>

        </div>
      </section>

      <!-- Sección 2: Servicios (100% viewport) -->
      <section id="servicios" class="snap services">
        
          <div class="services-header">
            <h2 class="section-title">Servicios</h2>
            <p class="muted-center">Paquetes claros, ejecución ágil y enfoque en resultados. Solo lo que aporta valor.</p>
          </div>
          <div class="services-window">
            <div class="services-carousel" aria-label="Servicios principales">
              <article class="service-slide">
                <div>
                    <div class="service-head">
                        <h3>Grabación de contenido</h3>
                        <p>Creamos material audiovisual atractivo y profesional que conecta con tu audiencia desde el primer segundo.</p>
                    </div>
                    <ul class="services-list">
                        <li>Producción en alta calidad</li>
                        <li>Multiples formatos y estilos</li>
                        <li>Enfoque creativo y dinámico</li>
                    </ul>
                </div>
              </article>
              <article class="service-slide">
                <div>
                  <div class="service-head">
                    <h3>Edición de contenido</h3>
                    <p>Transformamos tus grabaciones en piezas impactantes y listas para destacar en cualquier plataforma.</p>
                  </div>
                  <ul class="services-list">
                      <li>Edición rápida y eficiente</li>
                      <li>Corrección de color y sonido</li>
                      <li>Entregas listas para publicar</li>
                  </ul>
                </div>
              </article>
              <article class="service-slide">
                <div>
                  <div class="service-head">
                    <h3>Gestión de redes</h3>
                    <p>Nos encargamos de tu presencia online para que tu marca esté activa, visible y en constante crecimiento.</p>
                  </div>
                  <ul class="services-list">
                    <li>Calendario de publicaciones</li>
                    <li>Community management</li>
                    <li>Estrategia de crecimiento</li>
                  </ul>
                </div>
              </article>
              <article class="service-slide">
                <div>
                  <div class="service-head">
                    <h3>Análisis y seguimiento</h3>
                    <p>Medimos el rendimiento de tus acciones digitales para optimizar cada paso y maximizar resultados.</p>
                  </div>
                  <ul class="services-list">
                    <li>Análisis de audiencia</li>
                    <li>Informes mensuales</li>
                    <li>Reportes fáciles de interpretar</li>
                  </ul>
                </div>
              </article>
              <article class="service-slide">
                <div>
                  <div class="service-head">
                    <h3>Marketing para empresas</h3>
                    <p>Diseñamos estrategias personalizadas que impulsan tu negocio y lo diferencian en el mercado.</p>
                  </div>
                  <ul class="services-list">
                    <li>Campañas digitales efectivas</li>
                    <li>Segmentación de audiencias</li>
                    <li>Posicionamiento de marca</li>
                  </ul>
                </div>
              </article>
              <article class="service-slide">
                <div>
                  <div class="service-head">
                    <h3>Servicios web</h3>
                    <p>Desarrollamos páginas y soluciones digitales a medida para que tu marca tenga presencia sólida y profesional.</p>
                  </div>
                  <ul class="services-list">
                    <li>Diseño moderno y funcional</li>
                    <li>Optimización para móviles</li>
                    <li>Hecho a tu medida</li>
                  </ul>
                </div>
              </article>
            </div>
          </div>
          
      </section>

      <!-- Sección 3: Planes (100% viewport) -->
      <section id="planes" class="pricing snap">
        <div class="container">
          <h2 class="section-title">Planes de suscripción</h2>
          <p class="muted-center">Elige el plan que mejor encaja. Sin letras pequeñas.</p>

          <div class="grid">
            <div class="card col-4" data-plan="Standard">
              <h3>Standard</h3>
              <div class="price">300€ / mes</div>
              <div class="plan-divider" role="separator" aria-hidden="true"></div>
              <div class="pieces-per-month" aria-label="Piezas de contenido al mes">4 piezas de contenido / mes</div>
              <div class="plan-divider" role="separator" aria-hidden="true"></div>
              <ul class="features">
                <li>Grabación y edición de contenido</li>
                <li>Edición rápida y eficiente</li>
                <li>Entregas listas para publicar</li>
              </ul>
              <a href="#contacto" class="cta buy" data-select-plan="Standard">Empezar</a>
            </div>

            <div class="card col-4" data-plan="Profesional">
              <span class="badge-best" aria-label="Plan más vendido">Más vendido</span>
              <h3>Profesional</h3>
              <div class="price"><span class="current">550€ / mes</span></div>
              <div class="plan-divider" role="separator" aria-hidden="true"></div>
              <div class="pieces-per-month" aria-label="Piezas de contenido al mes">Todo lo incluido en el plan Standard</div>
              <div class="pieces-per-month" aria-label="Piezas de contenido al mes">8 piezas de contenido / mes</div>
              <div class="plan-divider" role="separator" aria-hidden="true"></div>
              <ul class="features">
                <li>Gestión de redes (Instagram y TikTok)</li>
                <li>Marketing para empresa</li>
              </ul>
              <a href="#contacto" class="cta buy" data-select-plan="Profesional">Elegir Profesional</a>
            </div>

            <div class="card col-4" data-plan="Premium">
                <span class="badge-best-red" aria-label="Oferta">Oferta</span>
              <h3>Premium</h3>
              <div class="price"><span class="current">850€ / mes</span><span class="old-price">1000€</span></div>
              <div class="plan-divider" role="separator" aria-hidden="true"></div>
              <div class="pieces-per-month" aria-label="Piezas de contenido al mes">Todo lo incluido en el plan Profesional</div>
              <div class="pieces-per-month" aria-label="Piezas de contenido al mes">12 piezas de contenido / mes</div>
              <div class="plan-divider" role="separator" aria-hidden="true"></div>
              <ul class="features">
                <li>Creación y mantenimiento web</li>
                <li>Análisis y seguimiento</li>
                <li>Soporte prioritario</li>
              </ul>
              <a href="#contacto" class="cta buy" data-select-plan="Premium">Elegir Premium</a>
            </div>
          </div>
        </div>
      </section>

      <!-- Sección 4: Contacto (100% viewport) -->
      <section id="contacto" class="snap">
        <div class="container">
          <h2 class="section-title">Contacto</h2>
          <p class="muted-center">Cuéntanos brevemente qué necesitas y te respondemos en 24–48h.</p>

          <div class="contact-actions">
            <a class="btn-wa" target="_blank" rel="noopener" aria-label="Contactar por WhatsApp"
               href="https://wa.me/34684727915?text=%C2%A1Hola%20C%C3%A9sar!%20Me%20ha%20llamado%20la%20atenci%C3%B3n%20tu%20trabajo%20y%20me%20gustar%C3%ADa%20hablar%20para%20ver%20si%20podemos%20trabajar%20juntos.">WhatsApp</a>
            <a id="toggle-form" type="button" class="btn-ghost" aria-expanded="false">Usar formulario</a>
          </div>

          <form action="" method="post" id="contact-form" hidden>
            <input type="hidden" name="plan" id="plan-field" />

            <div class="field half">
              <label for="nombre">Nombre</label>
              <input id="nombre" name="nombre" type="text" placeholder="Tu nombre" required />
            </div>
            <div class="field half">
              <label for="email">Email</label>
              <input id="email" name="email" type="email" placeholder="tucorreo@ejemplo.com" required />
            </div>
            <div class="field half">
              <label for="empresa">Empresa (opcional)</label>
              <input id="empresa" name="empresa" type="text" placeholder="Nombre de la empresa" />
            </div>
            <div class="field half">
              <label for="telefono">Teléfono (opcional)</label>
              <input id="telefono" name="telefono" type="tel" placeholder="+34 6XX XXX XXX" />
            </div>
            <div class="field">
              <label for="mensaje">Mensaje</label>
              <textarea id="mensaje" name="mensaje" placeholder="Cuéntanos tu proyecto en 3–4 líneas" required></textarea>
            </div>
            <button class="submit"  type="submit">Enviar</button>
          </form>
        </div>
      </section>
    </main>

    <footer>
      <div class="container">
        © <span id="year"></span> Agencia Digital · Estrategia, contenido y RRSS
      </div>
    </footer>

    <!-- Botón de WhatsApp ahora está en el navbar -->

    <!-- FAB móvil para ir a Planes; se muestra solo al estar en sección Servicios -->
    <a href="#planes" id="fab-planes" class="fab-planes" aria-label="Ver planes">Ver planes</a>

    <script>
      // Año actual en footer
      document.getElementById('year').textContent = new Date().getFullYear();

      // Autorellenar el plan al hacer clic en un CTA de compra
      document.querySelectorAll('[data-select-plan]').forEach(btn => {
        btn.addEventListener('click', () => {
          const plan = btn.getAttribute('data-select-plan');
          const input = document.getElementById('plan-field');
          if (input) input.value = plan;
        });
      });

      // Mostrar el FAB de "Ver planes" solo cuando la sección Servicios esté visible (móvil)
      (function(){
        const fab = document.getElementById('fab-planes');
        const servicios = document.getElementById('servicios');
        const planesTitle = document.querySelector('#planes .section-title');
        if (!fab || !servicios) return;

        const isMobile = () => window.matchMedia('(max-width: 720px)').matches;
        let obs;
        let isServiciosVisible = false;
        let isPlanesTitleVisible = false;

        const refresh = () => {
          const shouldShow = isMobile() && isServiciosVisible && !isPlanesTitleVisible;
          fab.classList.toggle('show', shouldShow);
        };
        const setup = () => {
          if (obs) obs.disconnect();
          if (!isMobile()) { fab.classList.remove('show'); return; }
          const options = { root: null, threshold: [0, 0.1, 0.2], rootMargin: '0px 0px -10% 0px' };
          obs = new IntersectionObserver((entries)=>{
            entries.forEach(e => {
              if (e.target === servicios) {
                isServiciosVisible = e.isIntersecting;
              } else if (planesTitle && e.target === planesTitle) {
                isPlanesTitleVisible = e.isIntersecting;
              }
            });
            refresh();
          }, options);
          obs.observe(servicios);
          if (planesTitle) obs.observe(planesTitle);
          // Estado inicial
          isServiciosVisible = location.hash === '#servicios';
          isPlanesTitleVisible = false;
          refresh();
        };
        setup();
        window.addEventListener('hashchange', () => {
          if (!isMobile()) return;
          isServiciosVisible = (location.hash === '#servicios');
          refresh();
        });
        window.addEventListener('resize', () => { if (obs) obs.disconnect(); setup(); }, { passive: true });
      })();

      // Mostrar/ocultar formulario de contacto al pulsar el botón
      (function(){
        const btn = document.getElementById('toggle-form');
        const form = document.getElementById('contact-form');
        if (!btn || !form) return;
        // Garantiza que empiece oculto
        form.hidden = true;
        btn.addEventListener('click', () => {
          form.hidden = !form.hidden;
          const expanded = !form.hidden;
          btn.setAttribute('aria-expanded', String(expanded));
          btn.textContent = expanded ? 'Ocultar formulario' : 'Formulario';
          if (expanded) form.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });
      })();
    </script>
  </body>
</html>
